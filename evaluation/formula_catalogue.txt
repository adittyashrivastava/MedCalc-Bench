FORMULA_CATALOGUE = {
    # ── RENAL & FLUID ───────────────────────────────────────────────
    ("creatinine clearance", "cockcroft", "cg"): (
        "Creatinine Clearance (Cockcroft-Gault Equation)",
        "CrCl = ((140 − age) × adjusted weight × gender_coeff) / (serum creatinine × 72)"
    ),
    ("egfr", "ckd-epi", "ckd epi"): (
        "CKD-EPI Equation for GFR",
        "eGFR = 142 × (Scr/A)^B × 0.9938^age × gender_coeff  (A = 0.7 or 0.9; B = −0.241 or −0.302)"
    ),
    ("mdrd",): (
        "MDRD GFR Equation",
        "GFR = 175 × Scr^(−1.154) × age^(−0.203) × race_coeff × gender_coeff"
    ),
    ("cystatin",): (
        "CKD-EPI (Cystatin-C) eGFR",
        "eGFR = 133 × (Scys/0.8)^(−0.499) × 0.996^age × gender_coeff"
    ),
    ("maintenance fluids",): (
        "Maintenance Fluids Calculation",
        "Rate (mL/day) = 100 mL × first 10 kg + 50 mL × next 10 kg + 20 mL × every kg > 20"
    ),
    # ── CARDIO / HEME ──────────────────────────────────────────────
    ("mean arterial pressure", "map"): (
        "Mean Arterial Pressure (MAP)",
        "MAP = (2 × DBP + SBP) / 3"
    ),
    ("qtc bazett", "bazett"): (
        "QTc Bazett Calculator",
        "QTc_Bazett = QT_ms / √RR_s"
    ),
    ("qtc fridericia", "fridericia"): (
        "QTc Fridericia Calculator",
        "QTc_Fridericia = QT_ms / RR_s^(1/3)"
    ),
    ("qtc framingham", "framingham"): (
        "QTc Framingham Calculator",
        "QTc_Framingham = QT_ms + 0.154 × (1 − RR_s) × 1000"
    ),
    ("qtc hodges", "hodges"): (
        "QTc Hodges Calculator",
        "QTc_Hodges = QT_ms + 1.75 × (HR_bpm − 60)"
    ),
    ("qtc rautaharju", "rautaharju"): (
        "QTc Rautaharju Calculator",
        "QTc_Rautaharju = QT_ms + 0.275 × (1 − RR_s) × 1000"
    ),
    ("cha2ds2", "stroke risk"): (
        "CHA₂DS₂-VASc Stroke Risk Score",
        "Score = CHF (1)+HTN (1)+Age ≥ 75 (2)+DM (1)+Stroke/TIA (2)+Vascular (1)+Age 65-74 (1)+Female (1)"
    ),
    ("has- bled", "hasbled"): (
        "HAS-BLED Bleeding Risk Score",
        "Score = HTN(1)+Abnormal renal/liver(1 or 2)+Stroke(1)+Bleed(1)+Labile INR(1)+Elderly >65(1)+Drugs/Alcohol(1 or 2)"
    ),
    ("rcri", "lee index"): (
        "Revised Cardiac Risk Index (Lee)",
        "Score = High-risk surgery + History of IHD + CHF + Cerebrovascular Dx + Insulin-therapy DM + Cr > 2 mg/dL"
    ),
    ("heart score",): (
        "HEART Score for Major Cardiac Events",
        "Score = History(0-2)+ECG(0-2)+Age(0-2)+Risk-factors(0-2)+Troponin(0-2)"
    ),
    # ── PULMONARY / VTE ────────────────────────────────────────────
    ("wells pulmonary embolism", "pe wells"): (
        "Wells' Criteria for Pulmonary Embolism",
        "Score = Clinical DVT (3) + PE primary dx (3) + HR > 100 (1.5) + Immobilization/Surgery (1.5) + Previous DVT/PE (1.5) + Hemoptysis (1) + Cancer (1)"
    ),
    ("wells dvt", "dvt wells"): (
        "Wells' Criteria for DVT",
        "Score = Cancer (1)+Paralysis/Cast (1)+Bedridden/Surgery (1)+Tenderness (1)+Swelling whole leg (1)+Calf > 3 cm (1)+Pitting edema (1)+Collateral veins (1) – Alt dx (2)"
    ),
    ("geneva",): (
        "Revised Geneva Score (PE)",
        "Score = Age > 65(1)+Previous DVT/PE(3)+Surgery/Fracture <1 mo(2)+Active malignancy(2)+Uni-lateral lower-limb pain(3)+Hemoptysis(2)+HR > 75( tachy-tiers )+Pain on palpation + one-leg edema(4)"
    ),
    # ── HEPATOLOGY ────────────────────────────────────────────────
    ("child-pugh",): (
        "Child-Pugh Score",
        "Score = Encephalopathy(1-3)+Ascites(1-3)+Bilirubin(1-3)+Albumin(1-3)+INR/PT(1-3)"
    ),
    ("meld-na", "meld na"): (
        "MELD-Na (UNOS/OPTN)",
        "MELD-Na = MELD(i) – Na – [0.025 × MELD(i) × (140 – Na)] + 140, where MELD(i) = 0.957 × ln(Cr) + 0.378 × ln(Bili) + 1.12 × ln(INR) + 0.643"
    ),
    ("fib-4", "fibrosis-4"): (
        "Fibrosis-4 (FIB-4) Index",
        "FIB-4 = (Age × AST) / (Platelets × √ALT)"
    ),
    # ── ENDOCRINE / METABOLIC ─────────────────────────────────────
    ("bmi", "body mass index"): (
        "Body Mass Index (BMI)",
        "BMI = Weight_kg / Height_m²"
    ),
    ("ibw", "ideal body weight", "devine"): (
        "Ideal Body Weight (Devine)",
        "IBW_male = 50 kg + 2.3 kg × (Height_in – 60); IBW_female = 45.5 kg + 2.3 kg × (Height_in – 60)"
    ),
    ("adjusted body weight", "abw"): (
        "Adjusted Body Weight",
        "AdjBW = IBW + 0.4 × (ActualBW – IBW)"
    ),
    ("body surface area", "bsa"): (
        "Body Surface Area (DuBois)",
        "BSA = 0.007184 × Height_cm^0.725 × Weight_kg^0.425"
    ),
    ("calcium correction", "corrected calcium"): (
        "Calcium Correction for Hypoalbuminemia",
        "Corrected Ca = Serum Ca + 0.8 × (4.0 – Albumin_g/dL)"
    ),
    ("sodium correction", "hyperglycemia", "corrected sodium"): (
        "Sodium Correction for Hyperglycemia",
        "Corrected Na = Measured Na + 1.6 × ((Glucose_mg/dL – 100)/100)"
    ),
    ("anion gap",): (
        "Albumin-Corrected Anion Gap",
        "AG_corrected = AG_measured + 2.5 × (4.0 – Albumin_g/dL)"
    ),
    ("delta gap",): (
        "Delta Gap",
        "ΔGap = (AG_measured – 12) – (24 – HCO₃⁻)"
    ),
    ("delta ratio",): (
        "Delta Ratio",
        "ΔRatio = (AG_measured – 12) / (24 – HCO₃⁻)"
    ),
    # ── OB / GYN ──────────────────────────────────────────────────
    ("estimated due date", "edd", "naegele"): (
        "Estimated Due Date (Naegele)",
        "EDD = Date_of_LMP + 280 days"
    ),
    ("estimated gestational age", "ega"): (
        "Estimated Gestational Age",
        "EGA_weeks = (Current_Date – Date_of_LMP) / 7"
    ),
    ("estimated conception",): (
        "Estimated Date of Conception",
        "EDC = EDD – 266 days"
    ),
    # ── CRITICAL CARE / SEPSIS ───────────────────────────────────
    ("sirs",): (
        "SIRS Criteria",
        "SIRS ≥ 2 of (T < 36 or > 38, HR > 90, RR > 20 or PaCO₂ < 32, WBC < 4 or > 12 or > 10% bands)"
    ),
    ("qsofa",): (
        "qSOFA Score",
        "qSOFA = Altered Mental(1) + SBP ≤ 100(1) + RR ≥ 22(1)"
    ),
    ("shock index",): (
        "Shock Index",
        "Shock_Index = HeartRate_bpm / SystolicBP_mmHg"
    ),
    # ── NEUROLOGY ────────────────────────────────────────────────
    ("gcs", "glasgow coma"): (
        "Glasgow Coma Scale",
        "GCS = Eye(1-4) + Verbal(1-5) + Motor(1-6)"
    ),
    # ── TOX / PAIN ───────────────────────────────────────────────
    ("mme", "morphine milligram equivalents"): (
        "Morphine Milligram Equivalents",
        "Total_MME = Σ(Dose_mg × ConversionFactor)"
    ),
    # ── RESPIRATORY / ACID-BASE ─────────────────────────────────
    ("aa gradient", "alveolar"): (
        "A-a Oxygen Gradient",
        "A-a = PAO₂ – PaO₂, where PAO₂ = FiO₂ × (Patm – PH₂O) – PaCO₂/0.8"
    ),
    ("albumin corrected delta ratio",): (
        "Albumin-Corrected Delta Ratio",
        "ΔRatio_corr = (AG_corr – 12) / (24 – HCO₃⁻)"
    ),
    # ── WEIGHT CHANGE ───────────────────────────────────────────
    ("target weight",): (
        "Target Weight",
        "Target Weight = DryWeight + (Current Weight – DryWeight) × Dialysis UF_Goal"
    ),
    # ── PNEUMONIA / RESPIRATORY SCORES (examples) ───────────────
    ("curb-65",): (
        "CURB-65 Pneumonia Severity Score",
        "Score = Confusion(1) + Urea > 7 mmol/L(1) + RR ≥ 30(1) + SBP < 90 or DBP ≤ 60(1) + Age ≥ 65(1)"
    ),
    ("psi", "pneumonia severity index"): (
        "PSI / PORT Score",
        "Composite points from 20 demographic, comorbidity, examination & lab variables"
    )
}